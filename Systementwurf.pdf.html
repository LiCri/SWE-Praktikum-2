<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:xi="http://www.w3.org/2003/XInclude" xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>Systementwurf</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
  /* hdoc_pdf.css */
  
  @page {
     size: A4 portrait;
     margin-top: 2.5cm;
     margin-left: 1.5cm;
     margin-right: 1.5cm;
     margin-bottom: 2cm;
     padding: 0cm;
  
    @top-left {
      content: flow(tl-content-flow);
      vertical-align: bottom;
      margin-bottom: 0.5cm;
      padding-bottom:0.1cm;
      font-family: "PT Sans Narrow", sans-serif;
      border-bottom:1px solid gray;
    }
  
    @top-center {
      content: flow(tm-content-flow);
      vertical-align: bottom;
      margin-bottom: 0.5cm;
      padding-bottom:0.1cm;
      font-family: "PT Sans Narrow", sans-serif;
      border-bottom:1px solid gray;
    }
  
    @top-right {
      content: flow(tr-content-flow);
      font-size:8pt; /*1em;*/
      text-align:right;
      vertical-align: bottom;
      margin-bottom: 0.5cm;
      padding-bottom:0.1cm;
      font-family: "PT Sans Narrow", sans-serif;
      border-bottom:1px solid gray;
    }
  
    @bottom-center {
      font-size:8pt; /*1em;*/
      text-align:center;
      vertical-align: top;
      margin-top: 0.5cm;
      padding-top:0.1cm;
      font-family: "PT Sans Narrow", sans-serif;
    }
  }
  .tl-content {
      flow: static(tl-content-flow);
      width:5cm;
      font-size:8pt; /*1em;*/
      text-align:left;
  }
  
  .tm-content {
      flow: static(tm-content-flow);
      width:8cm;
      font-size:10pt;
      text-align:center;
  }
  
  .tr-content {
     /*display: none;*/
     flow: static(tr-content-flow);
     width:5cm;
     font-size:8pt; /*1em;*/
     text-align:right;
  }
  
  .tr-page {
     content: "Seite " counter(page) " von " counter(pages);
  }
  body {
     font-family: "PT Sans", "PT Sans Narrow", sans-serif;
     font-size:10pt; /*1em;*/
  }
  
  code {
     font-family: "LettrGoth12 BT", monospace;
     font-size:1em;
  }
  
  h1, h2, h3, h4, h5, h6 {
     font-family: "PT Sans Narrow", sans-serif;
     page-break-after: avoid;
  }
  
  h1 {
     page-break-before: auto;
  }
  
  figure {
     margin-left: auto;
     margin-right: auto;
     text-align: center;
     width: 15cm;
  }
  
  table {
     border: 1px solid #AAAAAA;
     border-collapse: collapse;
     caption-side: bottom;
     margin-left: auto;
     margin-right: auto;
  }
  
  caption {
     margin-top: 0.1cm;
  }
  
  th, td {
     padding: 0.2cm;
  }
  
  tr:nth-of-type(even) {
    background-color:#aaa;
  }
  
  p {
     text-align: justify;
     -moz-hyphens: auto;
     -o-hyphens: auto;
     -webkit-hyphens: auto;
     -ms-hyphens: auto;
     hyphens: auto;    
     hyphenate-limit-chars: auto 3;
     hyphenate-limit-lines: 2;    
     prince-hyphenate-before: 3;
     prince-hyphenate-after: 3;
     prince-hyphenate-lines: 2;    
  }
  
  p + ul {
    margin-top: -10px;
  }
  
  td.lineNumbers {
    width: 5%;
  }
  
  ul {
     margin-left: 0;
     padding-left: 1.5em;
  }
  
  ol {
     margin-left: 0;
     padding-left: 2em;
  }
  
  blockquote {
     margin-left: 0;
     padding-left: 1.5em;
  }
  
  img {
    height: 95%;
    width: 95%; 
  }
  
  /* EOF */
  </style>
  <style type="text/css">
  /* Syntax-Markierung */
  
  pre {
      /*background-color: #FDF6E3;*/
      font-family: "LettrGoth12 BT", monospace;
      font-size: 1.0em;
      line-height: 1.1em;
  }
  
  .sourceCode {
      font-family: "LettrGoth12 BT", monospace;
      font-size: 1.0em;
      line-height: 1.1em;
  }
  
  @media print {
     pre {
         font-size: 9pt;
         line-height: 12pt;
     }
  
     .sourceCode {
         font-size: 9pt;
         line-height: 12pt;
     }
  
     tr.sourceCode {
        border: 1px solid lightgray;
     }
  
  }
  
  .sourceCode tr:nth-of-type(odd) {
     background-color: transparent;
  }
  
  /* KeyWordTok */
  .sourceCode .kw { color: #268BD2; }
  /* DataTypeTok */
  .sourceCode .dt { color: #268BD2; }
  
  /* DecValTok (decimal value), BaseNTok, FloatTok
  .sourceCode .dv, .sourceCode .bn, .sourceCode .fl { color: #D33682; }
  /* CharTok */
  .sourceCode .ch { color: #DC322F; }
  /* StringTok */
  .sourceCode .st { color: #2AA198; }
  /* CommentTok */
  .sourceCode .co { color: #93A1A1; }
  /* OtherTok */
  .sourceCode .ot { color: #A57800; }
  /* AlertTok */
  .sourceCode .al { color: #CB4B16; font-weight: bold; }
  /* FunctionTok */
  .sourceCode .fu { color: #268BD2; }
  /* RegionMarkerTok */
  .sourceCode .re { }
  
  /* EOF */
  </style>
</head>
<body>
<p class="tl-content">
Cristea, Liviu, 879401<br/>Hensel, Simon, 880997<br />Wewering, Lukas, 880680
</p>
<p class="tm-content">
Systementwurf<br/>SWE-Praktikum 2 WS 2014/2015<br/>
</p>
<p class="tr-content">
swe_p2_systementwurf.0.md<br/>rev. 0 / 23.11.2014<br/><span class="tr-page"></span>
</p> 
<h1 id="systementwurf"><span class="header-section-number">1</span> Systementwurf</h1>
<h2 id="datenbasis"><span class="header-section-number">1.1</span> Datenbasis</h2>
<div class="figure">
<img src="./Diagramme/uml-klassendiagramm.png" alt="Klassendiagramm" /><p class="caption">Klassendiagramm</p>
</div>
<h2 id="beschreibung"><span class="header-section-number">1.2</span> Beschreibung</h2>
<p>Im Folgenden werden die einzelnen Klassen jeweils näher erläutert.</p>
<h3 id="user"><span class="header-section-number">1.2.1</span> User</h3>
<p>Die Klasse <em>User</em> dient als abstrakte Basisklasse für die drei möglichen Rollen im Gesamtsystem. Zur Authentifizierung werden eine E-Mail und ein Passwort benötigt, zusätzlich wird das Registrierungsdatum vermerkt.</p>
<h3 id="behördenmitarbeiter"><span class="header-section-number">1.2.2</span> Behördenmitarbeiter</h3>
<p>Behördenmitarbeiter erben von <em>User</em> und speichern zusätzlich Vor- und Nachname.</p>
<p>Ein Mitarbeiter kann im System folgende Funktionen ausüben:</p>
<ol style="list-style-type: decimal">
<li>Bestätigung der von den Herstellern angemeldeten Medikamente</li>
<li>Bewertung der von den Ärzten eingetragenen Ereignisse und dahingehend Bewertung der Medikamente</li>
<li>(De)aktivierung der Ärzte-Accounts</li>
<li>Bestätigen der Hersteller</li>
<li>Datenpflege</li>
<li>Administrative Aufgaben</li>
</ol>
<p>Je nach Befugnis werden einem Behördenmitarbeiter ein oder mehrere Benutzerkreis(e) zugewiesen, welche unterschiedliche Rechte verleihen (s. unten).</p>
<h3 id="benutzerkreis"><span class="header-section-number">1.2.3</span> Benutzerkreis</h3>
<p>Einem Behördenmitarbeiter muss mindestens ein Benutzerkreis zugeordnet werden. Es existieren Benutzerkreise für die im Abschnitt <em>Behördenmitarbeiter</em> genannten Funktionen. Die Benutzerkreise können beliebig kombiniert werden.</p>
<h3 id="hersteller"><span class="header-section-number">1.2.4</span> Hersteller</h3>
<p>Hersteller erben von <em>User</em> und implementieren zusätzlich Namen und Anschrift.</p>
<p>Ein Hersteller kann beliebig viele Medikamente anmelden. Um mit dem System interagieren zu können, muss der <em>Hersteller</em>-Account von einem <em>Behördenmitarbeiter</em> aktiviert worden sein.</p>
<h3 id="arzt"><span class="header-section-number">1.2.5</span> Arzt</h3>
<p>Ärzte erben von <em>User</em> und implementieren zusätzlich Vorname, Nachname, Spezialisierung und Anschrift.</p>
<p>Ein Arzt ist dafür zuständig, Ereignisse zu Medikamenten einzutragen. Sein Status kann von Behördenmitarbeitern mit entsprechenden Rechten unter Angabe eines Grundes aktiviert oder deaktiviert werden.</p>
<h3 id="medikament"><span class="header-section-number">1.2.6</span> Medikament</h3>
<p>Ein Medikament wird von <em>einem</em> Hersteller eingetragen und kann anschließend von einem Behördenmitarbeiter bestätigt werden. Weiterhin kann ein Medikament beliebig vielen <em>Ereignissen</em> zugeordnet werden.</p>
<h3 id="ereignis"><span class="header-section-number">1.2.7</span> Ereignis</h3>
<p>Ein Ereignis wird von einem <em>Arzt</em> eingetragen. Neben einer Beschreibung wird mit der Priorität eine Einordnung bezüglich der Relevanz vorgenommen. Es gilt: Je größer der Wert, desto negativer ist das Ereignis. Jedem Ereignis wird genau ein <em>Medikament</em> und mindestens eine <em>Kategorie</em> zugeordnet.</p>
<p>Eingetragene Ereignisse können von einem Behördenmitarbeiter bewertet werden.</p>
<h3 id="bewertung"><span class="header-section-number">1.2.8</span> Bewertung</h3>
<p>Pro Medikament kann von einem <em>Behördenmitarbeiter</em> eine Bewertung eingetragen werden. Diese wird anhand der vorliegenden <em>Ereignisse</em> festgelegt. Die <em>Bewertung</em> besteht aus einem Kommentar und einer Wertung.</p>
<h3 id="kategorie"><span class="header-section-number">1.2.9</span> Kategorie</h3>
<p>Eine <em>Kategorie</em> spezifiziert ein <em>Ereignis</em> und wird von einem <em>Behördenmitarbeiter</em> eingetragen.</p>
<h3 id="statusänderung"><span class="header-section-number">1.2.10</span> Statusänderung</h3>
<p>Eine <em>Statusänderung</em> kann von einem <em>Behördenmitarbeiter</em> hinzugefügt werden und bezieht sich immer auf einen Arzt. Es bewirkt die Änderung des aktiv-Flags. Für die Statusänderung muss ein Grund angegeben werden.</p>
<h2 id="umwandlung-in-relationales-datenmodell"><span class="header-section-number">1.3</span> Umwandlung in relationales Datenmodell</h2>
<h3 id="user-1"><span class="header-section-number">1.3.1</span> User</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">rolle_id</td>
<td align="left">int</td>
</tr>
<tr class="odd">
<td align="left">email</td>
<td align="left">string</td>
</tr>
<tr class="even">
<td align="left">passwort</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">registrierung</td>
<td align="left">datetime</td>
</tr>
</tbody>
</table>
<h3 id="benutzerkreis-1"><span class="header-section-number">1.3.2</span> Benutzerkreis</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">bezeichnung</td>
<td align="left">string</td>
</tr>
</tbody>
</table>
<h3 id="user_benutzerkreis"><span class="header-section-number">1.3.3</span> User_Benutzerkreis</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">user_id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">benutzerkreis_id</td>
<td align="left">int</td>
</tr>
</tbody>
</table>
<h3 id="hersteller-1"><span class="header-section-number">1.3.4</span> Hersteller</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">name</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">anschrift</td>
<td align="left">string</td>
</tr>
<tr class="even">
<td align="left">bestätigt</td>
<td align="left">bool</td>
</tr>
</tbody>
</table>
<h3 id="arzt-1"><span class="header-section-number">1.3.5</span> Arzt</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">vorname</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">nachname</td>
<td align="left">string</td>
</tr>
<tr class="even">
<td align="left">spezialisierung</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">anschrift</td>
<td align="left">string</td>
</tr>
<tr class="even">
<td align="left">aktiv</td>
<td align="left">bool</td>
</tr>
</tbody>
</table>
<h3 id="medikament-1"><span class="header-section-number">1.3.6</span> Medikament</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">hersteller_id</td>
<td align="left">int</td>
</tr>
<tr class="odd">
<td align="left">name</td>
<td align="left">string</td>
</tr>
<tr class="even">
<td align="left">beschreibung</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">bestätigt</td>
<td align="left">bool</td>
</tr>
</tbody>
</table>
<h3 id="ereignis-1"><span class="header-section-number">1.3.7</span> Ereignis</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">medikament_id</td>
<td align="left">int</td>
</tr>
<tr class="odd">
<td align="left">arzt_id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">Beschreibung</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">priorität</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">zeitpunkt</td>
<td align="left">date</td>
</tr>
</tbody>
</table>
<h3 id="bewertung-1"><span class="header-section-number">1.3.8</span> Bewertung</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ereignis_id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">mitarbeiter_id</td>
<td align="left">int</td>
</tr>
<tr class="odd">
<td align="left">kommentar</td>
<td align="left">string</td>
</tr>
<tr class="even">
<td align="left">wertung</td>
<td align="left">int</td>
</tr>
</tbody>
</table>
<h3 id="kategorie-1"><span class="header-section-number">1.3.9</span> Kategorie</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">bezeichnung</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">mitarbeiter_id</td>
<td align="left">int</td>
</tr>
</tbody>
</table>
<h3 id="ereignis_kategorie"><span class="header-section-number">1.3.10</span> Ereignis_Kategorie</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ereignis_id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">kategorie_id</td>
<td align="left">int</td>
</tr>
</tbody>
</table>
<h3 id="statusänderung-1"><span class="header-section-number">1.3.11</span> Statusänderung</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribut</th>
<th align="left">Typ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">mitarbeiter_id</td>
<td align="left">int</td>
</tr>
<tr class="odd">
<td align="left">arzt_id</td>
<td align="left">int</td>
</tr>
<tr class="even">
<td align="left">grund</td>
<td align="left">string</td>
</tr>
<tr class="odd">
<td align="left">datum</td>
<td align="left">datetime</td>
</tr>
</tbody>
</table>
<h2 id="komponenten"><span class="header-section-number">1.4</span> Komponenten</h2>
<div class="figure">
<img src="./Diagramme/uml-komponentendiagramm.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<h3 id="beschreibung-1"><span class="header-section-number">1.4.1</span> Beschreibung</h3>
<ul>
<li><p>(externes) Melderegister: Stellt die zum Abgleichen benötigten externen Daten zur Verfügung.</p></li>
<li><p>Hardwaerzugriffsschicht: Gewährleistet den Hardwarezugriff auf die Daten.</p></li>
<li><p>DBMS: Verwaltet die Datenbank per PostgresSQL. Es sind Standart Zugriffe möglich, wie lesen, schreiben und löschen.</p></li>
<li><p>Webserver: Stellt die Webaplikation Meldeverfahren zur Verfügung und leiten die externen/internen Datenzugriffe an sie weiter.</p></li>
<li><p>Meldeverfahren: Die Webaplikation, welche dem Benutzer die gewünschten Funktionen zur Verfügung stellt und seine Eingaben verarbeitet.</p></li>
<li><p>Webbrowser: Beliebiger Webbrowser, der die Benutzereingaben an den Webserver schickt und die gewünschten Funktionen für den Benutzer zur Darstellung bringt.</p></li>
</ul>
<h3 id="komponenten-des-meldeverfahrens"><span class="header-section-number">1.4.2</span> Komponenten des Meldeverfahrens</h3>
<div class="figure">
<img src="./Diagramme/Meldeverfahren.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<ul>
<li><p>Benutzerschnittstelle: Liefert die Benutzerfunktionen durch der von der Authentifizierung geliferten für den aktuellen Benutzer freigegebenen Funktionen und greift durch die Applikationslogik auf diese zu.</p></li>
<li><p>Applikationslogik: Liefert Zugriff auf die von der Benutzerschnittstelle benötigten Funktionen.</p></li>
<li><p>Authentifizierung: Authentifiziert den Benutzer und gibt der Benutzerschnittstelle an welche Funktionen dieser zur Verfügung hat.</p></li>
</ul>
<h3 id="komponenten-der-benutzerschnittstelle"><span class="header-section-number">1.4.3</span> Komponenten der Benutzerschnittstelle</h3>
<div class="figure">
<img src="./Diagramme/Benutzerschnittstelle.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<ul>
<li><p>Funktionen vorbereiten</p></li>
<li><p>Benutzerfunktion</p></li>
</ul>
<div class="figure">
<img src="./Wireframes/Arzt_registrieren.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<div class="figure">
<img src="./Wireframes/Ereignis_melden.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<div class="figure">
<img src="./Wireframes/Medikament_Registrieren.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<h3 id="komponenten-der-authentifizierung"><span class="header-section-number">1.4.4</span> Komponenten der Authentifizierung</h3>
<div class="figure">
<img src="./Diagramme/Authentifizierung.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<ul>
<li><p>Registrieren/Einlogen</p></li>
<li><p>Registrierung/Login prüfen</p></li>
<li><p>Funktionen freigeben</p></li>
</ul>
<h3 id="komponenten-der-aplikationslogik"><span class="header-section-number">1.4.5</span> Komponenten der Aplikationslogik</h3>
<div class="figure">
<img src="./Diagramme/Anwendungslogik.png" alt="Komponenten" /><p class="caption">Komponenten</p>
</div>
<ul>
<li><p>externer Daten zugriff</p></li>
<li><p>interne Daten verwalten</p></li>
<li><p>Funktionen Medikamente</p></li>
<li><p>Funktionen Datenpflege</p></li>
<li><p>Funktionen DV</p></li>
<li><p>Funktionen</p></li>
</ul>
</body>
</html>
